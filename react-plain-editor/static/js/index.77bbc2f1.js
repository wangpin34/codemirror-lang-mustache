(()=>{"use strict";var e={125:function(e,t,r){var n=r("549"),a=r("194"),s=r("82"),o=r("606"),c=r("235"),i=r("987"),l=r("611"),u=r("63"),d=r("353");let f=r("94").WQ.deserialize({version:14,states:"!^QYQPOOOeQQO'#CcOOQO'#Cj'#CjOOQO'#Cf'#CfQYQPOOOOQO'#Cd'#CdOOQO,58},58}OmQPO,58}OOQO-E6d-E6dOOQO1G.i1G.i",stateData:"r~O]OSPOS~ORQOSQOUPO~OTUOXTO~OTXO~O",goto:"q_PPPPPPP`dPgPPPmTQOSRVPQSORWSTROS",nodeNames:"âš  LineComment Program Identifier String MustacheEnd MustacheStart Mustache MustacheContent MustacheIdentifier",maxTerm:14,nodeProps:[["openedBy",5,"MustacheStart"],["closedBy",6,"MustacheEnd"],["isolate",7,""]],skippedNodes:[0,1],repeatNodeCount:1,tokenData:"%c~R^XY}YZ}]^}pq}rs!`st#|}!O$e!Q![$e!]!^#|!c!}$e#R#S$e#T#o$e#o#p${#q#r%W~!SS]~XY}YZ}]^}pq}~!cVOr!`rs!xs#O!`#O#P!}#P;'S!`;'S;=`#v<%lO!`~!}OS~~#QRO;'S!`;'S;=`#Z;=`O!`~#^WOr!`rs!xs#O!`#O#P!}#P;'S!`;'S;=`#v;=`<%l!`<%lO!`~#yP;=`<%l!`~$RSP~OY#|Z;'S#|;'S;=`$_<%lO#|~$bP;=`<%l#|R$lTRPXQ}!O$e!Q![$e!c!}$e#R#S$e#T#o$e~%OP#o#p%R~%WOU~~%ZP#q#r%^~%cOT~",tokenizers:[0,1],topRules:{Program:[0,2]},tokenPrec:0}),O=c.Qf.define([{tag:d.pJ.bracket,class:"mustache-bracket"},{tag:d.pJ.variableName,class:"mustache-variable"},{tag:d.pJ.content,class:"mustache-content"}]);(0,c.nF)(O);let p=c.qp.define({name:"mustache",parser:f.configure({props:[c.x0.add({Mustache:c.Dv}),(0,d.Gv)({LineComment:d.pJ.lineComment,MustacheStart:d.pJ.bracket,MustacheEnd:d.pJ.bracket,MustacheContent:d.pJ.content,MustacheIdentifier:d.pJ.variableName,Identifier:d.pJ.name})]})}),h=l.lg.fromClass(class{update(e){(e.docChanged||e.viewportChanged||e.state.field(b)!==e.startState.field(b))&&(this.decorations=this.createDecorations(e.view))}createDecorations(e){let t=new i.f_,r=e.state.field(b);for(let{from:n,to:a}of e.visibleRanges){let s;let o=e.state.doc.sliceString(n,a),c=/\{\{\s*([\w\-_\$]+)\s*\}\}/g;for(;s=c.exec(o);){let e=n+s.index,a=e+s[0].length,o=s[1],c=r.has(o)?"mustache-content":"mustache-content not-found";t.add(e,a,l.p.mark({class:c}))}}return t.finish()}constructor(e){(0,o._)(this,"decorations",void 0),this.decorations=this.createDecorations(e)}},{decorations:e=>e.decorations}),m=(0,l.bF)((e,t)=>{let{from:r,to:n,text:a}=e.state.doc.lineAt(t),s=Math.max(r,t-10),o=Math.min(n,t+10),c=/\{\{\s*([\w]+)\s*\}\}/g,i=null;for(;i=c.exec(a.slice(s-r,o-r));){let r=s+i.index,n=r+i[0].length;if(r<=t&&n>=t){let t=i[1],a=e.state.field(b).get(t)||"Unknown variable";return{pos:r,end:n,above:!0,create:()=>{let e=document.createElement("div");return e.className="tooltip",e.textContent=a,{dom:e}}}}}return null}),v=c.Qf.define([{tag:d.pJ.bracket,class:"mustache-bracket"},{tag:d.pJ.variableName,class:"mustache-variable"},{tag:d.pJ.special(d.pJ.content),class:"mustache-content"}]),g=(0,c.nF)(v),P=i.Py.define(),b=i.QQ.define({create:()=>new Map,update(e,t){for(let e of t.effects)if(e.is(P))return e.value;return e}}),S=new Map([]),k=new c.ri(p,[g,m]);l.tk.theme({"&":{backgroundColor:"transparent !important",height:"100%"}});let Q=e=>{let{initialDoc:t,variables:r,onChange:n}=e,s=(0,a.useRef)(null),[o,c]=(0,a.useState)(),d=(0,a.useRef)(t),f=(0,a.useRef)(n);return(0,a.useEffect)(()=>{if(!s.current||o)return;let e=i.yy.create({doc:d.current,extensions:[u.Xy,k,b.init(()=>S),h,l.tk.updateListener.of(e=>{e.changes&&f.current&&f.current(e.state)})]}),t=new l.tk({state:e,parent:s.current});return c(t),()=>{t.destroy()}},[s]),(0,a.useEffect)(()=>{var e;if(!o)return;let t=new Map(Object.entries(r));o.dispatch({effects:(e=t,P.of(e))})},[r,o]),[s,o]},C=function(){let[e,t]=(0,a.useState)("{{token}}"),[r,s]=Q({initialDoc:e,onChange:(0,a.useCallback)(e=>{t(e.doc.toString())},[]),variables:{token:"the token value"}}),o=(0,a.useCallback)(()=>{s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:""}})},[s]);return(0,n.jsxs)("main",{children:[(0,n.jsx)("section",{children:(0,n.jsx)("button",{onClick:o,children:"Clean"})}),(0,n.jsx)("div",{className:"editor-wrapper h-full",ref:r})]})},x=document.getElementById("root");x&&s.createRoot(x).render((0,n.jsx)(a.StrictMode,{children:(0,n.jsx)(()=>(0,n.jsx)("div",{children:(0,n.jsx)(C,{})}),{})}))}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e=[];r.O=function(t,n,a,s){if(n){s=s||0;for(var o=e.length;o>0&&e[o-1][2]>s;o--)e[o]=e[o-1];e[o]=[n,a,s];return}for(var c=1/0,o=0;o<e.length;o++){for(var n=e[o][0],a=e[o][1],s=e[o][2],i=!0,l=0;l<n.length;l++)(!1&s||c>=s)&&Object.keys(r.O).every(function(e){return r.O[e](n[l])})?n.splice(l--,1):(i=!1,s<c&&(c=s));if(i){e.splice(o--,1);var u=a();void 0!==u&&(t=u)}}return t}})(),r.rv=function(){return"1.1.3"},(()=>{var e={980:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a=n[0],s=n[1],o=n[2],c,i,l=0;if(a.some(function(t){return 0!==e[t]})){for(c in s)r.o(s,c)&&(r.m[c]=s[c]);if(o)var u=o(r)}for(t&&t(n);l<a.length;l++)i=a[l],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkreact_plain_editor=self.webpackChunkreact_plain_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.1.3";var n=r.O(void 0,["361","706"],function(){return r("125")});n=r.O(n)})();